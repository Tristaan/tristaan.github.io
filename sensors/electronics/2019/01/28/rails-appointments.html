<!DOCTYPE html>
<html lang="en"><head><!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-125019416-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-125019416-2');
</script>


<meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:image" content="https://sneider.si/assets/logo_wide.png"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Rails appointment engine Pt.1 | sneider.si</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Rails appointment engine Pt.1" />
<meta name="author" content="tristan" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Before you start I recommend you read Rails engine guide In this guide you will get insights on building your own engine from start to finish. This engine is going to accept some settings from the main application, implement it’s own appointment specific settings and allow users to book appointments." />
<meta property="og:description" content="Before you start I recommend you read Rails engine guide In this guide you will get insights on building your own engine from start to finish. This engine is going to accept some settings from the main application, implement it’s own appointment specific settings and allow users to book appointments." />
<link rel="canonical" href="https://sneider.si/sensors/electronics/2019/01/28/rails-appointments.html" />
<meta property="og:url" content="https://sneider.si/sensors/electronics/2019/01/28/rails-appointments.html" />
<meta property="og:site_name" content="sneider.si" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-01-28T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Rails appointment engine Pt.1" />
<meta name="twitter:site" content="@sneider_si" />
<meta name="twitter:creator" content="@tristan" />
<meta property="fb:admins" content="Tristan.sneider" />
<meta property="article:publisher" content="Tristan.sneider" />
<meta name="google-site-verification" content="8kBL7vAyL-pacXh9wYFQbA2HlYSs2WWmtA5UyRwK_s8" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"tristan"},"dateModified":"2019-01-28T00:00:00+00:00","datePublished":"2019-01-28T00:00:00+00:00","description":"Before you start I recommend you read Rails engine guide In this guide you will get insights on building your own engine from start to finish. This engine is going to accept some settings from the main application, implement it’s own appointment specific settings and allow users to book appointments.","headline":"Rails appointment engine Pt.1","mainEntityOfPage":{"@type":"WebPage","@id":"https://sneider.si/sensors/electronics/2019/01/28/rails-appointments.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://sneider.si/assets/logo_wide.png"},"name":"tristan"},"url":"https://sneider.si/sensors/electronics/2019/01/28/rails-appointments.html"}</script>
<!-- End Jekyll SEO tag -->
<link href="https://fonts.googleapis.com/css?family=Zilla+Slab|Cutive+Mono|Kosugi+Maru|Montserrat:400,400i,700&amp;subset=cyrillic,latin-ext" rel="stylesheet">
	<link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/base-min.css">
	<link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/pure-min.css">
	<link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/grids-responsive-min.css">
  <script src="https://kit.fontawesome.com/cfc3b5fecb.js" crossorigin="anonymous"></script>
<!-- Mathjax Support -->
	<script type="text/javascript" async
					src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
	</script>
  <link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://sneider.si/feed.xml" title="sneider.si" /></head>
<body>
        <main id="layout">
            <a id="menuLink" class="menu-toggle" href="#menu">
                <span></span>
            </a>
            <div id="menu"><nav class="pure-menu">
    <a class="pure-menu-heading" rel="author" href="/">
        sneider.si
        <div>insmod, dmesg, rmmod</div>
    </a>
    <ul class="pure-menu-list">
        
            <li class="pure-menu-item item-">
                <a class="pure-menu-link"
                   href="/about.html"
                   title="Go to About">
                    <i class="fas fa-caret-right"></i>
                    About
                </a>
                
            </li>
        
            <li class="pure-menu-item item-">
                <a class="pure-menu-link"
                   href="/gaming.html"
                   title="Go to Gaming">
                    <i class="fas fa-caret-right"></i>
                    Gaming
                </a>
                
            </li>
        
            <li class="pure-menu-item item-">
                <a class="pure-menu-link"
                   href="/"
                   title="Go to Posts">
                    <i class="fas fa-caret-right"></i>
                    Posts
                </a>
                
            </li>
        
            <li class="pure-menu-item item-">
                <a class="pure-menu-link"
                   href="/projects.html"
                   title="Go to Completed Games">
                    <i class="fas fa-caret-right"></i>
                    Completed Games
                </a>
                
            </li>
        
    </ul>
</nav>
<footer class="">
    <data class="" href="/"></data><a class="contact" href="mailto:tristan@sneider.si">Contact me!</a><span class="copyright">
        <i class="far fa-copyright"></i>tristan</span>

</footer></div>
            <div id="main">
                <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Rails appointment engine Pt.1</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2019-01-28T00:00:00+00:00" itemprop="datePublished">28.01.2019, Mon
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Before you start I recommend you read <a href="https://guides.rubyonrails.org/engines.html">Rails engine guide</a>
In this guide you will get insights on building your own engine from start to finish. This engine is going to accept some settings from the main application, implement it’s own appointment specific settings and allow users to book appointments.</p>

<h1 id="how-to-rails-appointments-engine">How-to Rails appointments engine</h1>
<p>First let’s create a checklist of what the engine should receive from the main app, what settings it should have, what (and where) it should have the outputs available.</p>

<p>It receives:</p>
<ul>
  <li>Appoinment provider model</li>
  <li>Appoinment receiver model (or models)</li>
</ul>

<p>It sets:</p>
<ul>
  <li>Available times</li>
  <li>Appoitment length</li>
</ul>

<p>It outputs:</p>
<ul>
  <li>Booking links</li>
  <li>Available appointments list</li>
  <li>Occupied appointments</li>
</ul>

<h2 id="the-appointment">The appointment</h2>
<p>The appointment model should store information about itself:</p>
<ul>
  <li>id:integer</li>
  <li>start_date:datetime</li>
  <li>length:time</li>
  <li>provider_id:integer</li>
  <li>receiver_id:integer</li>
  <li>comment:text</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td>status:enum (accepted</td>
          <td>declined</td>
          <td>unset)</td>
        </tr>
      </tbody>
    </table>
  </li>
</ul>

<h3 id="generate-the-base-engine">Generate the base engine</h3>
<p>We will use the rails generator to create a plugin with the –mountable option:
<code class="language-plaintext highlighter-rouge">$ rails plugin new &lt;directory&gt; --mountable</code></p>

<p>Then we generate the appointment model:</p>

<p><code class="language-plaintext highlighter-rouge">$ rails g model appointment start_date:datetime length:time provider_id:integer receiver_id:integer provider_type:string receiver_type:string comment:text status:integer</code></p>

<p>We also generate a settings model for storing appointment providers’ settings:</p>

<p><code class="language-plaintext highlighter-rouge">$ rails g model setting name:string value:string provider_id:integer provider_type:string</code></p>

<p>Stay tuned for Pt.2…</p>

  </div><a class="u-url" href="/sensors/electronics/2019/01/28/rails-appointments.html" hidden></a>
</article>

            </div>
        </main>
				<style>
    #cookie-notice {padding: 0.5rem 1rem; display: none; text-align: center; position: fixed; bottom: 0; width: calc(100% - 2rem); background: #222; color: rgba(255,255,255,0.8);}
    #cookie-notice a {display: inline-block; cursor: pointer; margin-left: 0.5rem;}
    @media (max-width: 767px) {
        #cookie-notice span {display: block; padding-top: 3px; margin-bottom: 1rem;}
        #cookie-notice a {position: relative; bottom: 4px;}
    }
</style>
<div id="cookie-notice"><span>We would like to use third party cookies and scripts to improve the functionality of this website.</span><a id="cookie-notice-accept" class="btn btn-primary btn-sm">Approve</a><a href="/privacy" class="btn btn-primary btn-sm">More info</a></div>
<script>
    function createCookie(name,value,days) {
        var expires = "";
        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (days*24*60*60*1000));
            expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + value + expires + "; path=/";
    }
    function readCookie(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for(var i=0;i < ca.length;i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1,c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
        }
        return null;
    }
    function eraseCookie(name) {
        createCookie(name,"",-1);
    }

    if(readCookie('cookie-notice-dismissed')=='true') {
			// Enter Includes here
    } else {
        document.getElementById('cookie-notice').style.display = 'block';
    }
    document.getElementById('cookie-notice-accept').addEventListener("click",function() {
        createCookie('cookie-notice-dismissed','true',31);
        document.getElementById('cookie-notice').style.display = 'none';
        location.reload();
    });

</script>

        <script>
menuLink.onclick=function(a){a.preventDefault();var e="active";layout.className=layout.className==e?"":e};
donateButton.onclick=function(a){a.preventDefault();var e="active";donate.className=donate.className==e?"":e};
        </script>
    </body>
</html>
